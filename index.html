<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking AI Influence</title>
    <link rel="stylesheet" href="site.css">
</head>
<body>
    <div class="container">
        <h1>Tracking AI Influence</h1>
        <p class="subtitle">Monitoring key indicators of AI's growing influence across economic, cultural, and social systems</p>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'overview')">Overview</button>
            <button class="tab-button" onclick="openTab(event, 'economic')">Economic</button>
            <button class="tab-button" onclick="openTab(event, 'governmental')">Governmental</button>
            <button class="tab-button" onclick="openTab(event, 'cultural')">Cultural</button>
            <button class="tab-button" onclick="openTab(event, 'news')">News</button>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="overview-hero">
                <div class="explainer">
                    <p>
                        As AI systems increasingly take over human roles in labor, creativity, governance, companionship and decision-making, they may gradually erode the mechanisms that keep our societies aligned with human interests. This slow shift—known as <a href="https://gradual-disempowerment.ai/" target="_blank" rel="noopener noreferrer" style="color: #0366d6; text-decoration: none;"><em>Gradual Disempowerment</em></a>—describes a world where AI becomes indispensable to the economy, culture, and state, while human participation and influence decline. Left unchecked, this could lead to societies that function efficiently, but no longer for human ends.
                    </p>
                    <p>
                        This website gathers important metrics that indicate the influence of AIs over important societal functions. You can also see recent news related to Gradual Disempowerment.
                    </p>
                    <p>
                        <strong>Read more about Gradual Disempowerment:</strong><br>
                        <a href="https://gradual-disempowerment.ai/" target="_blank" rel="noopener noreferrer">https://gradual-disempowerment.ai/</a><br>
                        <a href="https://intelligence-curse.ai" target="_blank" rel="noopener noreferrer">https://intelligence-curse.ai</a><br>
                        <a href="https://80000hours.org/problem-profiles/gradual-disempowerment/" target="_blank" rel="noopener noreferrer">https://80000hours.org/problem-profiles/gradual-disempowerment/</a>
                    </p>
                </div>

                <div class="hero-chart">
                    <div class="chart-container">
                        <!-- Hero chart will be dynamically rendered -->
                    </div>
                </div>
            </div>

            <!-- Overview sections will be dynamically generated here -->
        </div>

        <!-- Economic Tab -->
        <div id="economic" class="tab-content">
            <div class="tab-explainer">
                <p>Loading...</p>
            </div>
            <!-- Sections will be dynamically generated here -->
        </div>

        <!-- Governmental Tab -->
        <div id="governmental" class="tab-content">
            <div class="tab-explainer">
                <p>Loading...</p>
            </div>
            <!-- Sections will be dynamically generated here -->
        </div>

        <!-- Cultural Tab -->
        <div id="cultural" class="tab-content">
            <div class="tab-explainer">
                <p>Loading...</p>
            </div>
            <!-- Sections will be dynamically generated here -->
        </div>

        <!-- News Tab -->
        <div id="news" class="tab-content">
            <h2 style="color: #333; margin-bottom: 10px;">Recent News</h2>
            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Latest developments in AI influence across government, business, and society</p>

            <!-- News items will be dynamically loaded here -->
            <div class="news-container">
                <!-- Loading placeholder -->
                <p style="text-align: center; color: #999;">Loading news...</p>
            </div>
        </div>
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="modal-overlay" onclick="closeModalOnOverlay(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Data Information</h3>
                <button class="modal-close" onclick="closeInfoModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content will be injected here -->
            </div>
        </div>
    </div>

    <script src="javascript_files/news_data.js"></script>
    <script src="javascript_files/charts_data.js"></script>
    <script src="javascript_files/modalData.js"></script>
    <script>


        class ContentRenderer {
            constructor() {
                this.newsData = [];
                this.chartsData = {};
            }

            async init() {
                try {
                    await this.loadData();
                    this.renderNews();
                    this.renderCharts();
                } catch (error) {
                    console.error('Error initializing content:', error);
                }
            }

            async loadData() {
                this.newsData = NEWS_DATA;
                this.chartsData = CHARTS_DATA;
            }

            renderNews() {
                const newsContainer = document.querySelector('.news-container');
                if (!newsContainer) return;

                newsContainer.innerHTML = this.newsData.map(item => this.createNewsCard(item)).join('');
            }

            createNewsCard(item) {
                return `
                    <div class="news-card">
                        <a href="${item.url}" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <div class="news-image" style="background: ${item.imageGradient}; color: ${item.imageColor}; font-weight: 600; text-align: center; padding: 20px;">
                                ${item.imageLabel}
                            </div>
                        </a>
                        <div class="news-content">
                            <h3 class="news-header">${item.title}</h3>
                            <div class="news-date">${item.date}</div>
                            <p class="news-summary">${item.summary}</p>
                            <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="news-link">Read more →</a>
                        </div>
                    </div>
                `;
            }

            renderCharts() {
                this.renderOverviewTab();
                this.renderEconomicTab();
                this.renderGovernmentalTab();
                this.renderCulturalTab();
            }

            renderOverviewTab() {
                const overviewData = this.chartsData.overview;
                if (!overviewData) return;

                const heroContainer = document.querySelector('.hero-chart .chart-container');
                if (heroContainer && overviewData.hero) {
                    heroContainer.innerHTML = this.createChartHTML(overviewData.hero);
                }

                const overviewTab = document.getElementById('overview');
                if (!overviewTab) return;

                const existingSections = overviewTab.querySelectorAll('.section');
                existingSections.forEach(section => section.remove());

                overviewData.sections.forEach(section => {
                    const sectionHTML = this.createSectionHTML(section);
                    overviewTab.insertAdjacentHTML('beforeend', sectionHTML);
                });
            }

            renderEconomicTab() {
                const economicData = this.chartsData.economic;
                if (!economicData) return;

                const economicTab = document.getElementById('economic');
                if (!economicTab) return;

                const tabExplainer = economicTab.querySelector('.tab-explainer p');
                if (tabExplainer && economicData.tabExplainer) {
                    tabExplainer.textContent = economicData.tabExplainer;
                }

                const existingSections = economicTab.querySelectorAll('.section');
                existingSections.forEach(section => section.remove());

                economicData.sections.forEach(section => {
                    const sectionHTML = this.createSectionHTML(section);
                    economicTab.insertAdjacentHTML('beforeend', sectionHTML);
                });
            }

            renderGovernmentalTab() {
                const governmentalData = this.chartsData.governmental;
                if (!governmentalData) return;

                const governmentalTab = document.getElementById('governmental');
                if (!governmentalTab) return;

                const tabExplainer = governmentalTab.querySelector('.tab-explainer p');
                if (tabExplainer && governmentalData.tabExplainer) {
                    tabExplainer.textContent = governmentalData.tabExplainer;
                }

                const existingSections = governmentalTab.querySelectorAll('.section');
                existingSections.forEach(section => section.remove());

                governmentalData.sections.forEach(section => {
                    const sectionHTML = this.createSectionHTML(section);
                    governmentalTab.insertAdjacentHTML('beforeend', sectionHTML);
                });
            }

            renderCulturalTab() {
                const culturalData = this.chartsData.cultural;
                if (!culturalData) return;

                const culturalTab = document.getElementById('cultural');
                if (!culturalTab) return;

                const tabExplainer = culturalTab.querySelector('.tab-explainer p');
                if (tabExplainer && culturalData.tabExplainer) {
                    tabExplainer.textContent = culturalData.tabExplainer;
                }

                const existingSections = culturalTab.querySelectorAll('.section');
                existingSections.forEach(section => section.remove());

                culturalData.sections.forEach(section => {
                    const sectionHTML = this.createSectionHTML(section);
                    culturalTab.insertAdjacentHTML('beforeend', sectionHTML);
                });
            }

            createSectionHTML(section) {
                const chartContainers = section.charts.map(chart => {
                    const containerClass = chart.fullWidth ? 'full-width-chart' : 'chart-container';
                    return `
                        <div class="${containerClass}">
                            ${this.createChartHTML(chart)}
                        </div>
                    `;
                }).join('');

                const gridClass = section.charts.some(c => c.fullWidth) ? '' : 'chart-grid';

                return `
                    <div class="section">
                        <h2 class="section-title">${section.title}</h2>
                        <div class="section-explainer">
                            <p>${section.explainer}</p>
                        </div>
                        <div class="${gridClass}">
                            ${chartContainers}
                        </div>
                    </div>
                `;
            }

            createChartHTML(chart) {
                // Use modal icon if modalId is provided, otherwise show a simple info icon
                const infoIcon = chart.modalId
                    ? `<span class="info-icon" onclick="openInfoModal('${chart.modalId}')" style="cursor: pointer;">i</span>`
                    : `<span class="info-icon" title="Data source and limitations info coming soon">i</span>`;

                let chartContent;
                if (chart.placeholder) {
                    chartContent = '<div class="chart-placeholder">Graph coming soon</div>';
                } else if (chart.iframe) {
                    const height = chart.iframeHeight || '620px';
                    const width = chart.iframeWidth || '100%';
                    const style = `${width ? `width: ${width};` : ''} ${height ? `height: ${height};` : ''} ${!height && !width ? '' : 'border: none;'}`.trim();

                    chartContent = `<iframe class="chart-iframe" src="${chart.iframe}" ${style ? `style="${style}"` : ''}></iframe>`;
                } else {
                    chartContent = '<div class="chart-placeholder">No data available</div>';
                }

                return `
                    <div class="chart-header">
                        <h3 class="chart-title">
                            ${chart.title}
                            &nbsp;${infoIcon}
                        </h3>
                        <div class="chart-explainer">${chart.explainer}</div>
                    </div>
                    ${chartContent}
                `;
            }
        }

        // Tab switching function
        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            const tabButtons = document.getElementsByClassName("tab-button");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }

            document.getElementById(tabName).classList.add("active");
            if (evt) evt.currentTarget.classList.add("active");
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const renderer = new ContentRenderer();
            renderer.init();
        });

        // Modal functions
        function openInfoModal(dataId) {
            var modalData = getModalData(dataId);
            if (!modalData) return;

            document.getElementById('modalTitle').textContent = modalData.title || 'Data Information';
            document.getElementById('modalBody').innerHTML = buildModalContent(modalData);
            document.getElementById('infoModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeInfoModal() {
            document.getElementById('infoModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function closeModalOnOverlay(event) {
            if (event.target === document.getElementById('infoModal')) {
                closeInfoModal();
            }
        }

        function toggleCollapsible(element) {
            var section = element.parentElement;
            section.classList.toggle('open');
        }

        function buildModalContent(data) {
            var html = '';

            // Metadata grid
            html += '<div class="metadata-grid">';
            html += '<div class="metadata-item"><span class="metadata-label">Source</span><span class="metadata-value">' + (data.source || '-') + '</span></div>';
            html += '<div class="metadata-item"><span class="metadata-label">Last Updated</span><span class="metadata-value">' + (data.lastUpdated || '-') + '</span></div>';
            html += '<div class="metadata-item"><span class="metadata-label">Next Expected Update</span><span class="metadata-value">' + (data.nextUpdate || '-') + '</span></div>';
            html += '<div class="metadata-item"><span class="metadata-label">Date Range</span><span class="metadata-value">' + (data.dateRange || '-') + '</span></div>';
            html += '<div class="metadata-item"><span class="metadata-label">Unit</span><span class="metadata-value">' + (data.unit || '-') + '</span></div>';
            html += '</div>';

            // What you should know section
            html += '<div class="collapsible-section">';
            html += '<div class="collapsible-header" onclick="toggleCollapsible(this)">';
            html += '<h4 class="collapsible-title">What you should know about this data</h4>';
            html += '<span class="collapsible-arrow">&#9660;</span>';
            html += '</div>';
            html += '<div class="collapsible-content">';
            if (data.description) {
                html += '<h4>Description</h4><p>' + data.description + '</p>';
            }
            if (data.interpretation) {
                html += '<h4>How to interpret the data</h4><p>' + data.interpretation + '</p>';
            }
            if (data.limitations) {
                html += '<h4>Assumptions and Limitations</h4><p>' + data.limitations + '</p>';
            }
            html += '</div></div>';

            // Sources section
            if (data.sources && data.sources.length > 0) {
                html += '<div class="collapsible-section">';
                html += '<div class="collapsible-header" onclick="toggleCollapsible(this)">';
                html += '<h4 class="collapsible-title">The data of this indicator is based on the following sources</h4>';
                html += '<span class="collapsible-arrow">&#9660;</span>';
                html += '</div>';
                html += '<div class="collapsible-content">';
                data.sources.forEach(function(src, index) {
                    if (index > 0) html += '<hr style="margin: 15px 0; border: none; border-top: 1px solid #eee;">';
                    html += '<table class="source-table">';
                    if (src.name) html += '<tr><td>Name</td><td><strong>' + src.name + '</strong></td></tr>';
                    if (src.description) html += '<tr><td>Description</td><td>' + src.description + '</td></tr>';
                    if (src.retrievedFrom) html += '<tr><td>Retrieved From</td><td><a href="' + src.retrievedFrom + '" target="_blank" rel="noopener noreferrer">' + src.retrievedFrom + '</a></td></tr>';
                    if (src.retrievedOn) html += '<tr><td>Retrieved On</td><td>' + src.retrievedOn + '</td></tr>';
                    if (src.citation) html += '<tr><td>Citation</td><td><div class="source-citation">' + src.citation + '</div></td></tr>';
                    html += '</table>';
                });
                html += '</div></div>';
            }

            // Processing section
            if (data.processing) {
                html += '<div class="collapsible-section">';
                html += '<div class="collapsible-header" onclick="toggleCollapsible(this)">';
                html += '<h4 class="collapsible-title">How we processed the data</h4>';
                html += '<span class="collapsible-arrow">&#9660;</span>';
                html += '</div>';
                html += '<div class="collapsible-content">';
                html += '<p>' + data.processing + '</p>';
                html += '</div></div>';
            }

            return html;
        }



        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeInfoModal();
            }
        });



    </script>
</body>
</html>

